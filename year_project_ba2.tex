\documentclass[10pt, a4paper]{article}
\usepackage{float} % display graphics at the demanded place
\usepackage{hyperref} % display table des matières
\usepackage{subcaption} % authorize subfigure
\usepackage{booktabs}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[french]{babel} %casse tout chez moi
\usepackage{graphicx}

%élargi un peu pour que les diagrammes soient pas minuscules ou mal alignés
\evensidemargin=0in
\oddsidemargin=0in
\textwidth=6.5in

\graphicspath{{Diagrammes/}}


\title{\LARGE{INFO-F-109 : Projet d'informatique 2 }\\
       \textbf{Software requirement document\\
	   Pawn Hub}}
\author{Huwart Maxence, Boonen Jacques\\
		Pham Hong Phuc, Duc Nguyen, Caroline Forest\\
		Antunes Andre, Romain Mardulyn}
\date{17 Décembre 2018}
\begin{document}
	\maketitle
	\newpage
	\tableofcontents %do a table of content automatically	
	\newpage
	\section{Introduction}
		\subsection{Description du projet}
			\paragraph{}Ce projet aura pour but de recréer un grand classique des jeux de plateau: les échecs. Le jeu sera jouable via un mode multijoueurs. Le joueur pourra jouer au mode classique ou à ses variantes telles que  {\itshape AliceChess, DarkChess et HordeChess}. De plus, il aura également la possibilité de créer un compte à partir duquel il pourra effectuer plusieurs actions qui seront détaillées ci-dessous. Néanmoins, le joueur pourra lancer une partie en tant que {\itshape visiteur} mais ne bénéficiera pas des avantages liés à la possession d'un compte.
			
			\subsubsection{Fonctionnalités pour joueur {\itshape  visiteur} et {\itshape utilisateur}}Depuis le menu principal, les joueurs pourront accéder à l'option {\itshape View Rules} à travers lequel ils pourront lire en détail les règles du jeu d'échecs et de ses variantes. Les joueurs lanceront une partie via l'option {\itshape Game}.Lors d'une partie, ils pourront s'envoyer des messages via un chat dédié.
			
			\subsubsection{Fonctionnalités pour joueur {\itshape utilisateur}}Les joueurs pourront communiquer via un chat global. Dans le système de matchmaking, ils auront le choix entre affronter un ami ou un joueur aléatoire parmi ceux qui sont connectés et libre\footnote{qui n'est pas en partie.}. A travers le menu principal, les utilisateurs accèderont à plusieurs sous-menus tels que {\itshape View Ranking, View Rules, View Statistics, Friends List}.%rajouter d'autres fonctionnalités au besoin.
			
			
			

		\subsection{Glossaire} Par soucis de clarté et de lisibilité, toutes les informations relatives aux règles et au fonctionnement officiels des échecs et de ses variantes ne seront pas parcourues ci-dessous. 
		\begin{description}
		\item[Un joueur visiteur :] Joueur ne s'étant pas identifié au système via un compte.
		\item[Un joueur utilisateur :] Joueur s'étant identifié au sytème via un compte.
		\item[Matchmaking :] Système qui met en relation 2 joueurs avant le lancement d'une partie.
		\item[AliceChess :] Variante du jeu d'échec jouée en utilisant 2 plateaux. Lorsqu'un coup est joué, la pièce est déplacée à la case correspondante mais dans l'autre plateau. A part cela, Le jeu se déroule selon les règles habituelles du jeu d'échecs .
		\item[DarkChess :] Variante du jeu d'échec où le joueur ne voit que ses propres pièces et les cases où il peut légalement les déplacer.
		\item[HordeChess :] Variante du jeu d'échec où un joueur possède 32 pions et l'autre la collection standard du jeu d'échec traditionnel.
		\end{description}

		\subsection{Historique des modifications}
		
		\begin{table}[h!]
			\centering
			\begin{tabular}{|c|c|c|p{50mm}|}
				\hline
				 \textbf{version} & \textbf{date} & \textbf{auteur}  & \textbf{description} \\ \hline
				 1 & 4/12 & Pham Hong Phuc & Création du SRD en LaTex\\ \hline
				 1.1 & 6/12 & Caroline Forest & Ajout de diagrammes UML\\ \hline
				 1.2 & 8/12 & Boonen Jacques & 1.Introduction\\ \hline 
				 1.3 & 11/12 & Huwart Maxence & Besoins systèmes\\ \hline
				 1.4 & 12/12 & Mardulyn Romain & Explication des différent modes de jeu\\ \hline
\end{tabular}
			\caption*{Historique des modifications}
			\end{table}
%fin du tableau
\clearpage

%BESOINS UTILISATEURS%

\section{Besoins utilisateurs : Fonctionnels}
		
		
\subsection{Connexion}

\begin{figure}[ht]
\includegraphics[scale=0.5]{UC_connexion.png}
\caption{Diagramme de \textit{use case} des actions possibles d'un utilisateur quant à son identification}
\label{UC_menu} %UseCase_menu
\end{figure}

\subsubsection{S'identifier}
\textbf{Acteur :} \textit{User}.\\
\textbf{Relations avec d'autres cas d'utilisation :} Néant.\\
\textbf{Pré-conditions :} Le \textit{user} doit avoir sélectionné le sous-menu \textit{Connexion} puis l'option {\itshape Log In} dans le menu principal du jeu.\\
\textbf{Post-conditions :} Le \textit{user} doit encoder un nom d'utilisateur et un mot de passe d'un compte déja existant dans le système \\
\textbf{Cas général :} Après s'être identifié, le \textit{user} peut profiter de tous les sous-menus du menu principal\\
\textbf{Cas exceptionnels :} Si un utilisateur est déja connecté sur un compte, un autre joueur ne peut se connecter sur ce compte. Egalement, si l'utilisateur encode mal ses identifiants, le système lui renvoie un message d'erreur afin qu'il les réécrivent correctement.



\subsubsection{Créer un compte}
\textbf{Acteur :} \textit{User}.\\
\textbf{Relations avec d'autres cas d'utilisation :}Néant.\\
\textbf{Pré-conditions :} Le \textit{user} doit avoir sélectionné le sous-menu \textit{Connexion} puis l'option {\itshape Create} dans le menu principal du jeu.\\
\textbf{Post-conditions :} Le \textit{user} doit encoder un nom d'utilisateur et un mot de passe afin de créer son compte\\
\textbf{Cas général :} Un nom d'utilisateur et un mot de passe correspondant est encodé dans la base de données du système\\
\textbf{Cas exceptionnels :} Si le nom d'utilisateur encodé est déja dans la base de données, l'utilisateur doit en réencoder un nouveau.



\subsection{Menu Principal}

\begin{figure}[ht]
\begin{center}
\includegraphics[scale=0.5]{UC_mainmenu.png}
\caption{Diagramme de \textit{use case} des actions possibles d'un utilisateur}
\label{UC_menu} %UseCase_menu
\end{center}
\end{figure}

\subsubsection{Jouer}
\textbf{Acteur :} \textit{User}.\\
\textbf{Relations avec d'autres cas d'utilisation :} Modes de jeu proposés (\textit{Classic},\textit{Alice}, \textit{Dark} ou \textit{Horde}).\\
\textbf{Pré-conditions :} Le \textit{user} doit avoir sélectionné l'option \textit{Game} dans le menu principal du jeu.\\
\textbf{Post-conditions :} Le \textit{user} selectionne un mode de jeu parmi ceux proposés(\textit{Classic},\textit{Alice}, \textit{Dark} ou \textit{Horde}).\\
\textbf{Cas général :} Le \textit{user} peut sélectionner un mode de jeu parmi ceux proposés(\textit{Classic},\textit{Alice}, \textit{Dark} ou \textit{Horde}), ce qui lance une requête de \textit{matchmaking} (voir \ref{matchmaker}) au serveur.\\
\textbf{Cas exceptionnels :} Néant.



\subsubsection{Voir les Règles}
\textbf{Acteur :} \textit{User}.\\
\textbf{Relations avec d'autres cas d'utilisation :} Néant.\\
\textbf{Pré-conditions :} Le \textit{user} doit avoir sélectionné l'option \textit{View Rules} dans le menu principal du jeu.\\
\textbf{Post-conditions :} Le \textit{user} accède aux règles de jeu.\\
\textbf{Cas général :} Le \textit{user} peut consulter les règles de jeu en envoyant une requête au serveur.\\
\textbf{Cas exceptionnels :} Néant.

\subsubsection{Voir les Statistiques Personnelles}
\textbf{Acteur :} \textit{User}.\\
\textbf{Relations avec d'autres cas d'utilisation :} Néant.\\
\textbf{Pré-conditions :} Le \textit{user} doit avoir sélectionné l'option \textit{View Statistics} dans le menu principal du jeu.\\
\textbf{Post-conditions :} Le \textit{user} accède à ses statistiques personnelles.\\
\textbf{Cas général :} Le \textit{user} peut consulter ses statistiques en envoyant une requête au serveur.\\
\textbf{Cas exceptionnels :} Néant.

\subsubsection{Voir le Classement}
\textbf{Acteur :} \textit{User}.\\
\textbf{Relations avec d'autres cas d'utilisation :} Néant.\\
\textbf{Pré-conditions :} Le \textit{user} doit avoir sélectionné l'option \textit{View Ranking} dans le menu principal du jeu.\\
\textbf{Post-conditions :} Le \textit{user} accède au classement global des joueurs (\textit{user} et \textit{others}).\\
\textbf{Cas général :} Le \textit{user} peut consulter le classement global des joueurs (\textit{user} et \textit{others}) en envoyant une requête au serveur.\\
\textbf{Cas exceptionnels :} Néant.

\subsubsection{Voir sa Liste d'Amis}
\textbf{Acteur :} \textit{User}.\\
\textbf{Relations avec d'autres cas d'utilisation :} \textit{Chat}.\\
\textbf{Pré-conditions :} Le \textit{user} doit avoir sélectionné l'option \textit{Friends List} dans le menu principal du jeu.\\
\textbf{Post-conditions :} Le \textit{user} accède à sa liste d'utilisateurs 'amis', avec lesquels il peut choisir de discuter, via l'option \textit{chat}.\\
\textbf{Cas général :} Le \textit{user} peut consulter sa liste d'utilisateurs 'amis' en envoyant une requête au serveur. Il peut aussi discuter avec eux via messages instantanés et le serveur.\\
\textbf{Cas exceptionnels :} Néant.
		

\subsection{Durant une partie}

\subsubsection{Avancer un pion}
\textbf{Acteur :} \textit{User}.\\
\textbf{Relations avec d'autres cas d'utilisation :} à compléter\\
\textbf{Pré-conditions :} à compléter.\\
\textbf{Post-conditions :} à compléter\\
\textbf{Cas général :} à compléter\\
\textbf{Cas exceptionnels :}à compléter.

\subsubsection{Discuter dans le chat}
\textbf{Acteur :} \textit{User}.\\
\textbf{Relations avec d'autres cas d'utilisation :} à compléter\\
\textbf{Pré-conditions :} à compléter.\\
\textbf{Post-conditions :} à compléter\\
\textbf{Cas général :} à compléter\\
\textbf{Cas exceptionnels :}à compléter.

\section{Besoins utilisateurs : Non-fonctionnels}
Afin d'avoir des parties de jeux dynamiques, les joueurs se verront imposer une limite de temps pour pouvoir jouer leur tour. \\
		
\section{Besoins systèmes : Fonctionnels}

\subsection{Connexion au serveur}
\textbf{Acteur :} \textit{Serveur}. \\
\textbf{Relations avec d'autres cas d'utilisation :} S'identifier. \\
\textbf{Pré-conditions :} \textit{Serveur} en ligne et réception du signal correspondant. \\
\textbf{Post-conditions :} utilisateur connecté, redirection vers le menu principal, sous-menus réservés aux utilisateurs débloqués, remplacement du sous-menu \textit{Identification/Create an account} par \textit{disconnection}. \\
\textbf{Cas général :} Utilisateur connecté. \\
\textbf{Cas exceptionnels :} Si un utilisateur est déjà connecté sur un compte, un autre joueur ne peut se connecter sur ce compte. Egalement, si l’utilisateur encode mal ses identifiants, le système lui renvoie un message d’erreur afin qu’il les réécrivent correctement. \\

\subsection{Enregistrement d'un nouveau compte}
\textbf{Acteur :} \textit{Server}. \\
\textbf{Relations avec d'autres cas d'utilisation :} Créer un compte. \\
\textbf{Pré-conditions :} \textit{Server} en ligne et réception du signal correspondant. \\
\textbf{Post-conditions :} Compte enregistré, message de succès de création de compte envoyé à l'utilisateur. \\
\textbf{Cas général :} Compte enregistré. \\
\textbf{Cas exceptionnels :} Si le compte est déjà existant, un message d'erreur est envoyé à l'utilisateur. \\

\subsection{Création d'une partie}
\textbf{Acteur :} \textit{Server}. \\
\textbf{Relations avec d'autres cas d'utilisation :} Choisir un mode de jeu. \\
\textbf{Pré-conditions :} \textit{Server} en ligne et réception du signal correspondant. \\
\textbf{Post-conditions :} Check dans la file d'attente si un joueur dans la même fourchette de classement et désirant jouer au même mode est disponible. Si oui, le \textit{Server} crée la partie. Si non, l'utilisateur est mit en file d'attente. \\
\textbf{Cas général :} Utilisateur mit en file d'attente si aucun adversaire trouvé, sinon une partie est crée. \\
\textbf{Cas exceptionnels :} Néant. \\

\subsection{Voir les Statistiques Personnelles}
\textbf{Acteur :} \textit{Server} \\
\textbf{Relations avec d'autres cas d'utilisation :} Néant. \\
\textbf{Pré-conditions :} \textit{Server} en ligne et réception du signal correspondant. \\
\textbf{Post-conditions :} Envoi des statistiques personnelles à l'utilisateur correspondant. \\
\textbf{Cas général :} Envoi des statistiques personnelles de l'utilisateur. \\
\textbf{Cas exceptionnels :} Néant. \\

\subsection{Voir le classement}
\textbf{Acteur :} \textit{Server} \\
\textbf{Relations avec d'autres cas d'utilisation :} Néant. \\
\textbf{Pré-conditions :} \textit{Server} en ligne et réception du signal correspondant. \\
\textbf{Post-conditions :} Envoi du classement. \\
\textbf{Cas général :} Envoi du classement. \\
\textbf{Cas exceptionnels :} Néant. \\

\subsection{Voir sa Liste d'Amis}
\textbf{Acteur :} \textit{Server} \\
\textbf{Relations avec d'autres cas d'utilisation :} {\itshape Envoi de messages}. \\
\textbf{Pré-conditions :} \textit{Server} en ligne et réception du signal correspondant. \\
\textbf{Post-conditions :} Envoi de la liste d'amis de l'utilisateur en question. \\
\textbf{Cas général :} L'utilisateur reçoit sa liste d'amis et peut interagir avec elle via des requêtes serveur (ajout d'un ami, suppression, etc).\\
\textbf{Cas exceptionnels :} Néant. \\

\subsection{Envoi de messages}
\textbf{Acteur :} \textit{Server} \\
\textbf{Relations avec d'autres cas d'utilisation :} Voir sa Liste d'Amis, jouer. \\
\textbf{Pré-conditions :} \textit{Server} en ligne et réception du message à envoyer. \\
\textbf{Post-conditions :} Envoi du message. \\
\textbf{Cas général :} Les utilisateurs peuvent s'envoyer des messages en partie et si ils sont amis, en dehors d'une partie aussi. \\
\textbf{Cas exceptionnels :} Néant. \\

\subsection{Gestion d'une partie}

\subsubsection{Premier à jouer}
Le joueur blanc commence.

\subsubsection{Déplacer une pièce}
\textbf{Acteur :} \textit{Server} \\
\textbf{Relations avec d'autres cas d'utilisation :} {\itshape Avancer un pion}. \\
\textbf{Pré-conditions :} réception du signal correspondant, coup valide (pas de pièces qui bloquent, etc). \\
\textbf{Post-conditions :} Pièce déplacée. \\
\textbf{Cas général :} Pièce déplacée. \\
\textbf{Cas exceptionnels :} Pièces qui bloquent ou une pièce est déjà sur la case. Dans tous ces cas : On redemande au joueur de faire déplacer une de ses pièces. \\

\subsubsection{Promotion}
\textbf{Acteur :} \textit{Server} \\
\textbf{Relations avec d'autres cas d'utilisation :} {\itshape Avancer un pion}. \\
\textbf{Pré-conditions :} Un pion est arrivé à l'autre bout du plateau. \\
\textbf{Post-conditions :} Pion promu en dame, fou, cavalier ou tour au choix du joueur qui possède le pion en question. \\
\textbf{Cas général :} Pion promu. \\
\textbf{Cas exceptionnels :} Néant. \\

\subsubsection{Roque}
\textbf{Acteur :} \textit{Server} \\
\textbf{Relations avec d'autres cas d'utilisation :} {\itshape Avancer un pion}. \\
\textbf{Pré-conditions :} Un joueur déplace le roi sur une case provoquant le roque, le roi et la tour en question n'ont pas bougé depuis le début de la partie. Aucune pièce ne bloque. \\
\textbf{Post-conditions :} Tour déplacée, position du roi mise à jour, marqué le roi et la tour comme "ayant déjà bougé". \\
\textbf{Cas général :} Roque effectué. \\
\textbf{Cas exceptionnels :} Si l'une des pré-conditions n'est pas respectée, on redemande au joueur de faire déplacer une de ses pièces. \\

\subsubsection{Déroulement de la partie}
Voici le déroulement de la partie représentée à l'aide d'un sequence diagram : \\

\begin{figure}[ht]
%\centering
\includegraphics[scale=0.53]{SequenceDiagramClassicChessTurn.png}
\caption{Diagramme de séquences d'une partie}
\label{SD_classicgame}
\end{figure}
\clearpage



\subsubsection{Fin de la partie}
A la fin de chaque tour, on vérifie si il y a un gagnant ou si l'on a affaire à un Pat. Si oui, le résultat est envoyé à chacun des joueurs et la partie se termine.

		
\label{matchmaker}
		
\begin{figure}[ht]
\centering
\includegraphics[scale=0.4]{SequenceDiagramMatchmaking.PNG}
\caption{Diagramme de séquence pour le \textit{Matchmaking}}
\label{SD_matchmaker} %SequenceDiagram_matchmaking
\end{figure}

\section{Besoins systèmes : non-Fonctionnels}

\subsection{Système d'exploitation}
Le programme doit être capable de tourner sous Unix. \\

\subsection{Réseau}
Le jeu se joue en réseau. Une connexion internet est donc requise. \\

\section{Design du système}

\subsection{Les différentes classes}
	
\begin{figure}[p]
%\centering
\includegraphics[scale=0.5]{ClassDiagram.png}
\caption{Diagramme de classes général}
\label{CD} %ClassDiagram
\end{figure}

		
\subsection{Connexion du joueur}
		
\subsection{Les actions du joueur}

\subsection{Client-Serveur}
\paragraph{}Le serveur aura une copie du board et se tâchera de devoir vérifier les différentes actions des joueurs. Il veillera également à mettre à jour les board des joueurs.

\subsection{Les modes de jeu}
\subsubsection{Classique}
\paragraph{}Le jeu d'échec classique, où le but est de mettre le roi adverse en échec sans qu'il ait la possibilité au tour suivant de ne plus l'être.
\subsubsection{Alice chess}
\paragraph{}Variante du jeu d'échec jouée en utilisant 2 board. Après chaque coup, la pièce déplacée est téléportée sur la case où elle à été placée mais de l'autre board. Un coup n'est valide que si la case où doit se téléporté la pièce ne comporte aucune pièce. A part cela, le jeu se déroule selon les règles habituelles du jeu d'échecs.
\subsubsection{Dark chess}
\paragraph{}Variante du jeu d'échec où le joueur ne voit que ses propres pièces et les cases où il peut légalement les déplacer. Le but des joueur est de prendre le roi adverse. Contrairement au règle classique, le roi d'un joueur peut être en échec à la fin de son tour. De plus il n'y a pas de prise en passant possible. A part cela, le jeu se déroule selon les règles habituelles du jeu d'échecs.

\subsubsection{Horde chess}
\paragraph{} Variante du jeu d'échec où le joueur noir possède 32 pions et l'autre la collection standard du jeu d'échec traditionnel. Le but du joueur noir est le but du jeu classique mais le but du joueur blanc est de prendre tous les pions du joueur noir. Le placement de départ des pièces du joueur noir est: un pion sur chaque case des lignes 5,6,7 et 8 sauf d8 et e8 ainsi qu'un pion sur d4 et un autre sur e4. Pour le joueur noir, seul les pions de la ligne 7 ont la possibilité de se déplacer de 2 cases dans le cas où il n'a pas encore bougé. A part cela, le jeu se déroule selon les règles habituelles du jeu d'échecs.
		
\subsection{Menu}
		
\section{Annexe}
	
	
		
		
		
		

\end{document}

